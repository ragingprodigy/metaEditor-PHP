(function(){"use strict";angular.module("principleGrouperApp",["ngCookies","ngResource","ui.router","ui.bootstrap","ngStorage","toastr","satellizer","ang-drag-drop","textAngular"]).constant("CONF",{countHeader:"Data-Count",pageHeader:"Data-Page",baseUrl:"http://lawpavilionplus.com/meta-editor/api/v1/grouper",authUrl:"http://lawpavilionplus.com/meta-editor/api/v1/users/login_jwt/?envelope=false"}).run(["$auth","$rootScope","$window",function(a,b,c){return b.$auth=a,b.$user=a.getPayload(),b.ago=function(a){return moment(a).fromNow()},b.$on("$stateChangeStart",function(b,d){return a.isAuthenticated()||d.guestView?void 0:c.location.href="login"})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$authProvider","$httpProvider","CONF",function(a,b,c,d,e,f){return e.interceptors.push("requestInterceptor"),d.logoutRedirect="login",d.loginOnSignup=!1,d.signupRedirect=!1,d.loginUrl=f.authUrl,d.loginRoute="login",d.tokenPrefix="__LP_p_groupa__",d.platform="browser",d.storage="sessionStorage",b.otherwise("/"),c.html5Mode(!1)}])}).call(this),function(){"use strict";angular.module("principleGrouperApp").config(["$stateProvider",function(a){return a.state("login",{url:"/login",guestView:!0,templateUrl:"app/login/login.html",controller:"LoginCtrl"})}]),angular.module("principleGrouperApp").controller("LoginCtrl",["$scope","$auth","$window","toastr",function(a,b,c,d){return a.login=function(){return b.login({username:a.username,password:a.password}).then(function(){return d.success("Login Successful!"),c.location.href=""},function(a){return d.error(a.data.userMessage)})}}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").service("Review",["$resource","CONF",function(a,b){return a(b.baseUrl+"/reviews/:id?envelope=false",null,{update:{method:"PUT"}})}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").service("Issues",["$resource","CONF",function(a,b){return a(b.baseUrl+"/issues?envelope=false",null,{stats:{url:b.baseUrl+"/issues/stats?envelope=false",method:"GET"},getPrinciples:{url:b.baseUrl+"/issues/principles?envelope=false",method:"GET",isArray:!0}})}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").service("Principle",["$resource","CONF",function(a,b){return a(b.baseUrl+"/principles/:pk?envelope=false",null,{update:{method:"PUT"}})}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").factory("requestInterceptor",["$q","uiBlock",function(a,b){return{request:function(c){return c.url.match(new RegExp("api/"))&&!c.url.match(new RegExp("issues/stats"))&&b.block("html"),c||a.when(c)},requestError:function(a){return b.clear(),a},response:function(a){return b.clear(),a},responseError:function(c){return b.clear(),a.reject(c)}}}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").service("uiBlock",["$localStorage",function(a){return{block:function(b,c){var d;return d=null!=c?c:"Processing...",b=null!=b?b:"html",a.blockedElement=b,$(function(){return angular.element(b).block({message:"<div class='alert alert-info'>"+d+"</div>",css:{height:"38px",border:""}})})},clear:function(){return angular.element(a.blockedElement).unblock()}}}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").config(["$stateProvider",function(a){return a.state("categorized",{url:"/categorized",templateUrl:"app/ui/categorized/categorized.html",controller:"CategorizedCtrl"})}]),angular.module("principleGrouperApp").controller("CategorizedCtrl",["$scope","Issues","CONF","$state","$sessionStorage",function(a,b,c,d,e){return a.perPage=25,a.loadTable=function(d){return b.query({page:d,per_page:a.perPage},function(b,d){return a.totalResults=d(c.countHeader),a.currentPage=d(c.pageHeader),a.pages=Math.ceil(a.totalResults/a.perPage),a.issues=b})},a.loadTable(1),a.pageChanged=function(){return a.loadTable(a.currentPage)},a.showDetail=function(a){return e.currentIssue=a,d.go("show_principles")}}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").config(["$stateProvider",function(a){return a.state("dashboard",{url:"/",templateUrl:"app/ui/dashboard/dashboard.html",controller:"DashboardCtrl"}).state("show_principles",{url:"/principles",templateUrl:"app/ui/dashboard/principles.html",controller:"GroupCtrl"})}]),angular.module("principleGrouperApp").controller("DashboardCtrl",["$scope","Issues","CONF","$state","$sessionStorage",function(a,b,c,d,e){return a.perPage=25,a.loadTable=function(d){return b.query({outStanding:!0,page:d,per_page:a.perPage},function(b,d){return a.totalResults=d(c.countHeader),a.currentPage=d(c.pageHeader),a.pages=Math.ceil(a.totalResults/a.perPage),a.issues=b})},a.loadTable(1),a.pageChanged=function(){return a.loadTable(a.currentPage)},a.showDetail=function(a){return e.currentIssue=a,d.go("show_principles")}}]).controller("GroupCtrl",["$scope","$sessionStorage","Issues","Principle","$modal",function(a,b,c,d,e){return a.issue=b.currentIssue,a.groups={},a.reviews=[],a.addReview=function(){var b;return b=e.open({templateUrl:"app/ui/dashboard/modals/review-form.html",backdrop:"static",size:"lg",controller:"ReviewModalCtrl",resolve:{issue:function(){return a.issue}}}),b.result.then(function(b){return a.reviews.push(b)})},a.showReviews=function(){return e.open({templateUrl:"app/ui/dashboard/modals/reviews.html",backdrop:"static",size:"lg",controller:"ReviewsCtrl",resolve:{issue:function(){return a.issue}}})},c.getPrinciples({issue:a.issue.issue,legalHead:a.issue.legalHead,subjectMatter:a.issue.subjectMatter},function(b){return a.groups["null"]=_.filter(b,function(a){return null===a.suitno41}),a.groups.A=_.filter(b,function(a){return"A"===a.suitno41}),a.groups.B=_.filter(b,function(a){return"B"===a.suitno41}),a.groups.C=_.filter(b,function(a){return"C"===a.suitno41})}),a.dropSuccessHandler=function(a,b,c){return c.splice(b,1)},a.onDrop=function(a,b,c){return"null"!==a&&"string"==typeof a?(c.push(b),b.suitno41=a,d.update({pk:b.pk},b)):void 0}}]).controller("ReviewsCtrl",["$scope","issue","$modalInstance","Review","$modal",function(a,b,c,d,e){return a.reviews=d.query({issue:b.issue,legalHead:b.legalHead,subjectMatter:b.subjectMatter}),a.close=function(){return c.dismiss("cancel")},a.edit=function(a){return e.open({templateUrl:"app/ui/dashboard/modals/review-form.html",backdrop:"static",size:"lg",controller:"ReviewEditModalCtrl",resolve:{review:function(){return a}}})}}]).controller("ReviewModalCtrl",["$scope","issue","$modalInstance","Review",function(a,b,c,d){return a.review={},a.close=function(){return c.dismiss("cancel")},a.submitReview=function(){var e;return e=new d(_.extend(a.review,b)),e.$save(function(a){return c.dismiss("close",a)})}}]).controller("ReviewEditModalCtrl",["$scope","review","$modalInstance","Review",function(a,b,c,d){return a.review=b,a.close=function(){return c.dismiss("cancel")},a.submitReview=function(){return d.update({id:a.review.id},a.review,function(){return c.dismiss("cancel")})}}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").config(["$stateProvider",function(a){return a.state("meta-editor",{url:"/meta-editor",templateUrl:"app/ui/meta-editor/meta-editor.html",controller:"MetaEditorCtrl"})}]),angular.module("principleGrouperApp").controller("MetaEditorCtrl",["$scope",function(a){return a.message="Hello"}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").factory("Modal",["$rootScope","$modal",function(a,b){var c;return c=function(c,d){var e;return e=a.$new(),c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})},{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d,e;b=Array.prototype.slice.call(arguments),e=b.shift(),d=void 0,d=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){d.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){d.dismiss(a)}}]}},"modal-danger"),d.result.then(function(c){a.apply(c,b)})}}}}}])}.call(this),function(){"use strict";angular.module("principleGrouperApp").controller("NavbarCtrl",["$scope","Issues","$auth","$rootScope","$location","$timeout","$window",function(a,b,c,d,e,f,g){return a.headBoard=function(){return b.stats({},function(b){return a.stats=b,f(function(){return a.headBoard()},6e4)})},a.headBoard(),a.isGuest=function(){return!c.isAuthenticated()},a.logout=function(){return c.logout(),g.location.href="/"},a.notAdmin=function(){return"admin"!==d.$user.role},a.isCollapsed=!0,a.isActive=function(a){return e.path().indexOf(0===a)}}])}.call(this),angular.module("principleGrouperApp").run(["$templateCache",function(a){"use strict";a.put("app/login/login.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class="center-form panel"><div class=panel-body><h2 class=text-center><i class="icon glyphicon-lock"></i> Secure Login</h2><br><form method=post ng-submit=login() name=loginForm><div class="alert alert-danger" ng-show=error.length>{{error}}</div><div class=form-group><input class="form-control input-lg" name=username ng-model=username placeholder="Your eChambers Username" required autofocus></div><div class=form-group><input class="form-control input-lg" type=password name=password ng-model=password placeholder=Password required></div><button type=submit ng-disabled=loginForm.$invalid class="btn btn-lg btn-block btn-default"><i class="fa fa-key"></i> Sign In</button></form></div></div></div></div>'),a.put("app/ui/categorized/categorized.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class="panel panel-purple"><div class=panel-heading>All Categorized Issues ({{totalResults}})<div class=pull-right><input class=search ng-model=query placeholder=Search...></div></div><div class="panel-body main-grid"><div class=text-center><pagination first-text="First Page" last-text="Last Page" next-text="Next Page" previous-text="Previous Page" boundary-links=true items-per-page=perPage class=centered-pager ng-change=pageChanged() total-items=totalResults ng-model=currentPage max-size=15 class=pagination-sm num-pages=pages></pagination></div><div><table class="table table-hover table-condensed table-bordered table-striped"><thead><tr><th style="width: 40px">S/N.</th><th>Legal Head</th><th>Subject Matter</th><th>Issue</th><th>Count</th><th style="width: 140px"></th></tr></thead><tbody><tr ng-repeat="r in issues | filter: query"><td>{{$index+1}}.</td><td>{{r.legalHead}}</td><td>{{r.subjectMatter}}</td><td>{{r.issue}}</td><td>{{r.pCount}}</td><td><button class="btn btn-block btn-default btn-xs" type=button ng-click=showDetail(r)>Show Principles</button></td></tr></tbody></table></div><div class=text-center><pagination last-text="Last Page" first-text="First Page" next-text="Next Page" previous-text="Previous Page" boundary-links=true items-per-page=perPage class=centered-pager ng-change=pageChanged() total-items=totalResults ng-model=currentPage max-size=15 class=pagination-sm num-pages=pages></pagination></div></div></div></div>'),a.put("app/ui/dashboard/dashboard.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class="panel panel-purple"><div class=panel-heading>Issues With Un-Categorized Principles ({{totalResults}})<div class=pull-right><input class=search ng-model=query placeholder=Search...></div></div><div class="panel-body main-grid"><div class=text-center><pagination first-text="First Page" last-text="Last Page" next-text="Next Page" previous-text="Previous Page" boundary-links=true items-per-page=perPage class=centered-pager ng-change=pageChanged() total-items=totalResults ng-model=currentPage max-size=15 class=pagination-sm num-pages=pages></pagination></div><div><table class="table table-hover table-condensed table-bordered table-striped"><thead><tr><th style="width: 40px">S/N.</th><th>Legal Head</th><th>Subject Matter</th><th>Issue</th><th>Count</th><th style="width: 140px"></th></tr></thead><tbody><tr ng-repeat="r in issues | filter: query"><td>{{$index+1}}.</td><td>{{r.legalHead}}</td><td>{{r.subjectMatter}}</td><td>{{r.issue}}</td><td>{{r.pCount}}</td><td><button class="btn btn-block btn-default btn-xs" type=button ng-click=showDetail(r)>Show Principles</button></td></tr></tbody></table></div><div class=text-center><pagination last-text="Last Page" first-text="First Page" next-text="Next Page" previous-text="Previous Page" boundary-links=true items-per-page=perPage class=centered-pager ng-change=pageChanged() total-items=totalResults ng-model=currentPage max-size=15 class=pagination-sm num-pages=pages></pagination></div></div></div></div>'),a.put("app/ui/dashboard/modals/review-form.html",'<div class=modal-header><div class=modal-title><h4>Add New Appellate Review <button class="btn btn-xs btn-danger pull-right" nng-click=close()><i class="fa fa-times"></i></button></h4></div></div><div class=modal-body><form name=reviewForm ng-submit="reviewForm.$valid && submitReview()"><div class=form-group><label>Title <span class=required>*</span></label><input class="form-control input-lg" ng-model=review.title placeholder="Title of Review" name=title required></div><div class=form-group><label>Content <span class=required>*</span></label><text-angular name=content required ng-model=review.content placeholder="Content of Review"></text-angular></div><button class="btn btn-lg btn-default btn-block" ng-disabled=reviewForm.$invalid><i class="fa fa-check-square"></i> Save</button></form></div><div class=modal-footer><button class="btn btn-danger" ng-click=close()><i class="fa fa-times"></i> Close</button></div>'),a.put("app/ui/dashboard/modals/reviews.html",'<div class=modal-header><div class=modal-title><h4>Appellate Reviews <button class="btn btn-xs btn-danger pull-right" nng-click=close()><i class="fa fa-times"></i></button></h4></div></div><div class=modal-body><div class="alert alert-info" data-ng-repeat="r in reviews"><h5>{{r.title}} <button class="btn btn-xs btn-primary pull-right" ng-click=edit(r)><i class="fa fa-edit"></i></button> <span class="label label-success pull-right mr-10">{{r.name}}</span></h5><p ng-bind-html=r.content class=text-justify></p></div></div><div class=modal-footer><button class="btn btn-danger" ng-click=close()><i class="fa fa-times"></i> Close</button></div>'),a.put("app/ui/dashboard/principles.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class="panel panel-purple"><div class=panel-heading><a href=# ng-click=window.history.back() class="btn btn-xs btn-danger"><i class="fa fa-arrow-left"></i> BACK</a> - {{issue.pCount}} principles found<div class=pull-right><input class=search ng-model=query placeholder=Search...></div></div><div class="panel-body main-grid"><div class=mt-10><button class="btn btn-success">{{issue.legalHead}}</button> <button class="btn btn-primary pull-right">{{issue.subjectMatter}}</button> <button class="btn btn-info pull-right mr-10" ng-click=showReviews()><i class="fa fa-folder-open"></i> Show Reviews</button> <button class="btn btn-default pull-right mr-10" ng-click=addReview()><i class="fa fa-plus"></i> Add Appellate Review</button></div><div class="alert alert-info mt-10"><b>SELECTED ISSUE:</b> {{issue.issue}}</div><div class=row><div class="col-sm-3 dropBox" ui-on-drop="onDrop(\'null\',$data,groups[\'null\'])"><h4 class=text-center>Unclassified</h4><div class="alert alert-info pointer" data-ng-repeat="c in groups[\'null\']" on-drop-success="dropSuccessHandler(\'null\',$index,groups[\'null\'])" ui-draggable=true drag=c ui-on-drop="onDrop(\'null\',$data,groups[\'null\'])"><p><b>{{$index+1}}</b>. <span ng-bind-html=c.principle></span></p><b>SUIT NO.: {{c.suitno}}</b></div></div><div class="col-sm-3 dropBox" ui-on-drop="onDrop(\'A\',$data,groups[\'A\'])"><h4 class=text-center>Group A</h4><div class="alert alert-success pointer" data-ng-repeat="c in groups[\'A\']" on-drop-success="dropSuccessHandler($event,$index,groups[\'A\'])" ui-draggable=true drag=c ui-on-drop="onDrop(\'A\',$data,groups[\'A\'])"><p><b>{{$index+1}}</b>. <span ng-bind-html=c.principle></span></p><b>SUIT NO.: {{c.suitno}}</b></div></div><div class="col-sm-3 dropBox" ui-on-drop="onDrop(\'B\',$data,groups[\'B\'])"><h4 class=text-center>Group B</h4><div class="alert alert-primary pointer" data-ng-repeat="c in groups[\'B\']" on-drop-success="dropSuccessHandler($event,$index,groups[\'B\'])" ui-draggable=true drag=c ui-on-drop="onDrop(\'B\',$data,groups[\'B\'])"><p><b>{{$index+1}}</b>. <span ng-bind-html=c.principle></span></p><b>SUIT NO.: {{c.suitno}}</b></div></div><div class="col-sm-3 dropBox" ui-on-drop="onDrop(\'C\',$data,groups[\'C\'])"><h4 class=text-center>Group C</h4><div class="alert alert-danger pointer" data-ng-repeat="c in groups[\'C\']" on-drop-success="dropSuccessHandler($event,$index,groups[\'C\'])" ui-draggable=true drag=c ui-on-drop="onDrop(\'C\',$data,groups[\'C\'])"><p><b>{{$index+1}}</b>. <span ng-bind-html=c.principle></span></p><b>SUIT NO.: {{c.suitno}}</b></div></div></div></div></div></div>'),a.put("app/ui/meta-editor/meta-editor.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><iframe src="http://lawpavilionplus.com/meta-editor/" style="width: 100%; height: 100%; border:  none" height=100% width=100%></iframe>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand ui-sref=dashboard><span class="fa fa-search"></span> Principle - <strong class=text-yellow>groupa <i class="fa fa-chain"></i></strong></a></div><div><ul class="nav navbar-nav"><li><a>#. All Issues: <b class=text-info>{{stats.all}}</b></a></li><li><a ui-sref=categorized>#. Categorized Issues: <b class=text-success>{{stats.grouped}}</b></a></li><li><a>#. Single Principle Issues: <b class=text-warning>{{stats.singlePrinciple}}</b></a></li><li><a ui-sref=dashboard>#. Un-Categorized Issues: <b class=text-danger>{{stats.unGrouped}}</b></a></li></ul></div><div collapse=isCollapsed class="pull-right navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-show=isGuest()><a ui-sref=login>Login</a></li><li class=dropdown ng-hide=isGuest()><a href=# class=dropdown-toggle data-toggle=dropdown role=button><i class="fa fa-list"></i> SETTINGS <span class=caret></span></a><ul class=dropdown-menu><li><a ui-sref=dashboard>PRINCIPLE GROUPER</a></li><li><a ui-sref=meta-editor>META EDITOR</a></li></ul></li><li ng-hide=isGuest()><a ng-click=logout() class=btn-link><i class="glyphicon glyphicon-off"></i> Logout ({{$user.name}})</a></li></ul></div></div>')}]);