!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof exports?exports.AngularDragDrop=t(require("angular")):e.AngularDragDrop=t(e.angular)}(this,function(e){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="/static/",t(0)}([function(e,t,r){r(2);var a=r(1);e.exports=a.module("filearts.dragDrop",[]).factory("$dragging",[function(){var e=null,t=null;return{getData:function(){return e},getType:function(){return t},setData:function(t){return e=t},setType:function(e){return t=e}}}]).directive("dragContainer",["$parse",function(e){return{restrict:"A",require:"dragContainer",controller:"DragContainerController",controllerAs:"dragContainer",link:function(t,r,a,n){n.init(r,t,{onDragStart:e(a.onDragStart),onDragEnd:e(a.onDragEnd)}),r.on("dragstart",n.handleDragStart.bind(n)),r.on("dragend",n.handleDragEnd.bind(n)),t.$watch(a.dragContainer,n.updateDragData.bind(n)),a.$observe("mimeType",n.updateDragType.bind(n)),a.$set("draggable",!0)}}}]).controller("DragContainerController",["$dragging",function(e){var t=this;t.init=function(e,r,a){t.el=e,t.scope=r,t.callbacks=a},t.handleDragStart=function(r){r.originalEvent&&(r=r.originalEvent);try{r.dataTransfer.setData(t.type,t.data)}catch(a){r.dataTransfer.setData("text",t.data)}r.dataTransfer.effectAllowed="move",r.dataTransfer.dropEffect="move",t.el.addClass("drag-container-active"),t.dragging=!0,e.setData(t.data),e.setType(t.type),t.callbacks.onDragStart&&t.callbacks.onDragStart(t.scope,{$event:r})},t.handleDragEnd=function(r){r.originalEvent&&(r=r.originalEvent),a.element(r.target).removeClass("drag-active"),t.el.removeClass("drag-container-active"),t.dragging=!1,e.setData(null),e.setType(null),t.callbacks.onDragEnd&&t.callbacks.onDragEnd(t.scope,{$event:r})},t.updateDragData=function(r){t.data=r,t.dragging&&e.setData(t.data)},t.updateDragType=function(r){t.type=r||"text/x-drag-data",t.dragging&&e.setType(t.type)}}]).directive("dropContainer",["$document","$parse",function(e,t){return{restrict:"A",require:"dropContainer",controller:"DropContainerController",controllerAs:"dropContainer",link:function(r,a,n,o){var i=function(e){return function(t){return r.$apply(function(){return o["handle"+e](t)})}},l=o.handleDragEnd.bind(o),c=i("DragEnter"),s=i("DragOver"),d=i("DragLeave"),g=i("Drop");o.init(a,r,{onDragEnter:t(n.onDragEnter),onDragOver:t(n.onDragOver),onDragLeave:t(n.onDragLeave),onDrop:t(n.onDrop)}),a.on("dragenter",c),a.on("dragover",s),a.on("dragleave",d),a.on("drop",g),r.$watch(n.accepts,o.updateMimeTypes.bind(o)),e.on("dragend",l),r.$on("$destroy",function(){e.off("dragend",l)})}}}]).controller("DropContainerController",["$dragging",function(e){var t=this,r={},n="center top top-right right bottom-right bottom bottom-left left top-left".split(" ");t.init=function(e,r,a){t.el=e,t.scope=r,t.callbacks=a,t.accepts=["text/x-drag-data"],t.el.addClass("drop-container")},t.addDropTarget=function(e,t){if(n.indexOf(e)<0)throw new Error("Invalid anchor point "+e);if(r[e])throw new Error("Duplicate drop targets for the anchor "+e);r[e]=t},t.removeDropTarget=function(e){r[e]&&r[e]===e&&(t.activeTarget=null),delete r[e]},t.updateMimeTypes=function(e){e||(e=["text/x-drag-data"]),a.isArray(e)||(e=[e]),t.accepts=e},t.updateDragTarget=function(n,o){n.originalEvent&&(n=n.originalEvent);var i=null,l=null,c=Number.MAX_VALUE,s=t.activeAnchor,d=t.activeTarget;o||a.forEach(r,function(e,r){var a=t.el[0].offsetWidth,o=t.el[0].offsetHeight,s=a/2,d=o/2;r.indexOf("left")>=0&&(s=0),r.indexOf("top")>=0&&(d=0),r.indexOf("right")>=0&&(s=a),r.indexOf("bottom")>=0&&(d=o);var g=Math.pow(s-n.offsetX,2)+Math.pow(d-n.offsetY,2);c>g&&(l=r,i=e,c=g)}),t.activeAnchor=l,t.activeTarget=i;var g={$event:n,data:e.getData(),anchor:l,target:i,prevAnchor:s,prevTarget:d};return d!==i&&(d&&(t.el.removeClass("drop-container-active-"+s),d.handleDragLeave(g)),i&&(t.el.addClass("drop-container-active-"+l),i.handleDragEnter(g))),g},t.handleDragEnter=function(r){if(r.originalEvent&&(r=r.originalEvent),!t.accepts||t.accepts.indexOf(e.getType())>=0){r.preventDefault();var a=t.updateDragTarget(r);t.el.children().css({"pointer-events":"none"}),t.el.addClass("drop-container-active"),t.callbacks.onDragEnter&&t.callbacks.onDragEnter(t.scope,a)}},t.handleDragOver=function(r){if(r.originalEvent&&(r=r.originalEvent),!t.accepts||t.accepts.indexOf(e.getType())>=0){r.preventDefault();var a=t.updateDragTarget(r);a.target&&a.target.handleDragOver(a),t.callbacks.onDragOver&&t.callbacks.onDragOver(t.scope,a)}},t.handleDragLeave=function(e){e.originalEvent&&(e=e.originalEvent);var r=t.updateDragTarget(e,!0);t.el.children().css({"pointer-events":null}),t.el.removeClass("drop-container-active"),t.callbacks.onDragLeave&&t.callbacks.onDragLeave(t.scope,r)},t.handleDragEnd=function(e){e.originalEvent&&(e=e.originalEvent),t.updateDragTarget(e,!0),t.el.children().css({"pointer-events":null}),t.el.removeClass("drop-container-active")},t.handleDrop=function(r){if(r.originalEvent&&(r=r.originalEvent),!t.accepts||t.accepts.indexOf(e.getType())>=0){r.preventDefault();var a=t.updateDragTarget(r);a.target&&a.target.handleDrop(a),t.callbacks.onDrop&&t.callbacks.onDrop(t.scope,a),this.handleDragEnd(r)}}}]).directive("dropTarget",["$parse",function(e){return{restrict:"A",require:["^dropContainer","dropTarget"],controller:"DropTargetController",controllerAs:"dropTarget",link:function(t,r,a,n){var o=n[0],i=n[1],l=a.dropTarget||"center",c=o.removeDropTarget.bind(o,l);r.addClass("drop-target drop-target-"+l),i.init(r,t,{onDragEnter:e(a.onDragEnter),onDragOver:e(a.onDragOver),onDragLeave:e(a.onDragLeave),onDrop:e(a.onDrop)}),o.addDropTarget(l,i),t.$on("$destroy",c)}}}]).controller("DropTargetController",[function(){var e=this;e.init=function(t,r,a){e.el=t,e.scope=r,e.callbacks=a},e.handleDragEnter=function(t){e.el.addClass("drop-target-active"),e.callbacks.onDragEnter&&e.callbacks.onDragEnter(e.scope,t)},e.handleDragOver=function(t){e.callbacks.onDragOver&&e.callbacks.onDragOver(e.scope,t)},e.handleDragLeave=function(t){e.el.removeClass("drop-target-active"),e.callbacks.onDragLeave&&e.callbacks.onDragLeave(e.scope,t)},e.handleDrop=function(t){e.callbacks.onDrop&&e.callbacks.onDrop(e.scope,t)}}])},function(t){t.exports=e},function(e,t,r){var a=r(3);"string"==typeof a&&(a=[[e.id,a,""]]);r(4)(a,{})},function(e,t,r){t=e.exports=r(5)(),t.push([e.id,"[drag-container]{-khtml-user-drag:element;-webkit-user-drag:element;-khtml-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-drag:element;user-select:none}[drop-container]{position:relative}[drop-target]{position:absolute;display:none}[drop-target].drop-target-active{display:block;pointer-events:none}.drop-target-center{top:0;right:0;bottom:0;left:0}.drop-target-top{top:0;right:0;height:50%;left:0}.drop-target-top-right{top:0;right:0;height:50%;width:50%}.drop-target-right{top:0;right:0;bottom:0;width:50%}.drop-target-bottom-right{height:50%;right:0;bottom:0;width:50%}.drop-target-bottom{height:50%;right:0;bottom:0;left:0}.drop-target-bottom-left{height:50%;width:50%;bottom:0;left:0}.drop-target-left{top:0;right:50%;bottom:0;left:0}.drop-target-top-left{top:0;width:50%;height:50%;left:0}",""])},function(e){function t(e,t){for(var r=0;r<e.length;r++){var a=e[r],o=c[a.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](a.parts[i]);for(;i<a.parts.length;i++)o.parts.push(n(a.parts[i],t))}else{for(var l=[],i=0;i<a.parts.length;i++)l.push(n(a.parts[i],t));c[a.id]={id:a.id,refs:1,parts:l}}}}function r(e){for(var t=[],r={},a=0;a<e.length;a++){var n=e[a],o=n[0],i=n[1],l=n[2],c=n[3],s={css:i,media:l,sourceMap:c};r[o]?r[o].parts.push(s):t.push(r[o]={id:o,parts:[s]})}return t}function a(){var e=document.createElement("style"),t=g();return e.type="text/css",t.appendChild(e),e}function n(e,t){var r,n,o;if(t.singleton){var c=u++;r=p||(p=a()),n=i.bind(null,r,c,!1),o=i.bind(null,r,c,!0)}else r=a(),n=l.bind(null,r),o=function(){r.parentNode.removeChild(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function o(e,t,r){var a=["/** >>"+t+" **/","/** "+t+"<< **/"],n=e.lastIndexOf(a[0]),o=r?a[0]+r+a[1]:"";if(e.lastIndexOf(a[0])>=0){var i=e.lastIndexOf(a[1])+a[1].length;return e.slice(0,n)+o+e.slice(i)}return e+o}function i(e,t,r,a){var n=r?"":a.css;if(e.styleSheet)e.styleSheet.cssText=o(e.styleSheet.cssText,t,n);else{var i=document.createTextNode(n),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(i,l[t]):e.appendChild(i)}}function l(e,t){var r=t.css,a=t.media,n=t.sourceMap;if(n&&"function"==typeof btoa)try{r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(n))+" */",r='@import url("data:stylesheet/css;base64,'+btoa(r)+'")'}catch(o){}if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var c={},s=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},d=s(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),g=s(function(){return document.head||document.getElementsByTagName("head")[0]}),p=null,u=0;e.exports=function(e,a){a=a||{},"undefined"==typeof a.singleton&&(a.singleton=d());var n=r(e);return t(n,a),function(e){for(var o=[],i=0;i<n.length;i++){var l=n[i],s=c[l.id];s.refs--,o.push(s)}if(e){var d=r(e);t(d,a)}for(var i=0;i<o.length;i++){var s=o[i];if(0===s.refs){for(var g=0;g<s.parts.length;g++)s.parts[g]();delete c[s.id]}}}}},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];e.push(r[2]?"@media "+r[2]+"{"+r[1]+"}":r[1])}return e.join("")},e}}])});